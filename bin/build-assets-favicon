#!/bin/bash
set -euo pipefail
ASSETS=$( realpath $(dirname $0)/../assets )
TMPDIR=$( mktemp -d )
BASENAME=the_underbar
LOGO_SVG=$ASSETS/$BASENAME.svg

# FAVICON

# main icon in various sizes
for SIZE in 16 32 48 64 ; do
    convert \
        -background none \
        -density 1000 \
        -resize ${SIZE}x${SIZE} \
        $LOGO_SVG \
        $TMPDIR/favicon-${SIZE}.png
done

# merge all in a single icon
convert \
    $TMPDIR/favicon-*.png \
    $ASSETS/../favicon.ico

rm -rf $TMPDIR
